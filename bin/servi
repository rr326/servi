#!/usr/bin/env bash
# Simple script to run servi from your working directory


# http://unix.stackexchange.com/questions/13464/is-there-a-way-to-find-a-file-in-an-inverse-recursive-search
function upsearch () {
    test / == "$PWD" && return || test -e "$1" && return || cd .. && upsearch "$1"
}

which -s python3
if [ $? -eq 1 ]  # $? is result of last operation
then
    echo
    echo "**************************************************"
    echo "python3 not found on path (try: 'which python3')."
    echo "python3 must be installed for servi to work."
    echo "Aborting"
    echo "**************************************************"
    echo
else
    if upsearch "servi"
    then
        python3 servi/servi $*
    else
        echo
        echo "****************************************************"
        echo "'servi' directory not found above current directory."
        echo "Aborting"
        echo "****************************************************"
    echo
    fi
fi



